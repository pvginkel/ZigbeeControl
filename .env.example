# zigbee-control Environment Configuration
#
# Copy this file to .env and update values as needed.
# All values shown are defaults.

# ── Core Settings ─────────────────────────────────────────────────────

# Flask environment: development, testing, production
FLASK_ENV=development

# Debug mode (disable in production)
DEBUG=true

# Secret key for Flask sessions (MUST be changed in production)
SECRET_KEY=dev-secret-key-change-in-production

# Allowed CORS origins (comma-separated in env, JSON list in code)
CORS_ORIGINS=["http://localhost:3200"]

# ── Background Tasks ─────────────────────────────────────────────────

# Maximum number of concurrent background task workers
TASK_MAX_WORKERS=4

# Task execution timeout in seconds
TASK_TIMEOUT_SECONDS=300

# How often to clean up completed tasks (seconds)
TASK_CLEANUP_INTERVAL_SECONDS=600

# ── Metrics ───────────────────────────────────────────────────────────

# Background metrics update interval in seconds
METRICS_UPDATE_INTERVAL=60

# ── Shutdown ──────────────────────────────────────────────────────────

# Maximum seconds to wait for tasks during graceful shutdown
GRACEFUL_SHUTDOWN_TIMEOUT=600

# Bearer token for authenticating drain endpoint access
DRAIN_AUTH_KEY=

# ── OIDC Authentication ──────────────────────────────────────────────

# Base URL for the application (used for redirect URI and cookie security)
BASEURL=http://localhost:3200

# Enable/disable OIDC authentication
OIDC_ENABLED=true

# OIDC provider settings
OIDC_ISSUER_URL=http://10.1.2.2:8080/realms/homelab-dev
OIDC_CLIENT_ID=zigbee-control
OIDC_CLIENT_SECRET=your-client-secret
OIDC_SCOPES=openid profile email
OIDC_AUDIENCE=

# Token validation
OIDC_CLOCK_SKEW_SECONDS=30

# Cookie settings
OIDC_COOKIE_NAME=access_token
OIDC_COOKIE_SECURE=
OIDC_COOKIE_SAMESITE=Lax
OIDC_REFRESH_COOKIE_NAME=refresh_token

# ── Server-Sent Events ───────────────────────────────────────────────

# URL to fetch frontend version information
FRONTEND_VERSION_URL=http://localhost:3200/version.json

# SSE heartbeat interval in seconds (5 for dev, 30 for production auto)
SSE_HEARTBEAT_INTERVAL=5

# SSE Gateway base URL
SSE_GATEWAY_URL=http://localhost:3202

# Shared secret for authenticating SSE Gateway callbacks
SSE_CALLBACK_SECRET=

# ── Domain ────────────────────────────────────────────────────────────

# Path to YAML tabs configuration file
APP_TABS_CONFIG=./tabs.yaml

# Kubernetes restart timeout in seconds
APP_K8S_RESTART_TIMEOUT=180
